FROM python

WORKDIR /app

COPY requirements.txt /app

RUN pip install -r requirements.txt

COPY . /app

ARG DJANGO_SECRET_KEY
ARG DJANGO_ALLOWED_HOSTS='*'
ARG DB_NAME
ARG DB_USER
ARG DB_PASSWORD
ARG DB_HOST
ARG DEBUG

ENV DJANGO_SECRET_KEY $DJANGO_SECRET_KEY
ENV DJANGO_ALLOWED_HOSTS $DJANGO_ALLOWED_HOSTS
ENV DB_NAME  $DB_NAME 
ENV DB_USER $DB_USER
ENV DB_PASSWORD $DB_PASSWORD
ENV DB_HOST $DB_HOST
ENV DEBUG $DEBUG


# cloud DB 이미 migrate
# RUN python manage.py migrate

CMD ["gunicorn", "--bind", "0:8000", "config.wsgi:application"]